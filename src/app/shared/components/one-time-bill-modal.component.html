<app-modal
  (onClose)="close()"
  [isOpen]="isOpen"
  [title]="editingBill() ? 'Edit One-Time Bill' : 'Add One-Time Bill'">
  <form (ngSubmit)="onSubmit()" [formGroup]="form" class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        Card *
      </label>
      <select
        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        formControlName="cardId">
        <option value="">Select a card</option>
        @for (card of cardService.activeCards(); track card.id) {
          <option [value]="card.id">
            {{ card.bankName }} - {{ card.cardName }}
          </option>
        }
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        Bill Name *
      </label>
      <input
        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        formControlName="name"
        placeholder="e.g., Restaurant, Gas"
        type="text"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        Amount *
      </label>
      <input
        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        formControlName="amount"
        min="0"
        placeholder="0.00"
        step="0.01"
        type="number"
      />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">
        Due Date *
      </label>
      <input
        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        formControlName="dueDate"
        type="date"
      />
    </div>

    <div class="flex items-center">
      <input
        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"
        formControlName="isPaid"
        id="isPaid"
        type="checkbox"
      />
      <label class="ml-2 block text-sm text-slate-700" for="isPaid">
        Mark as Paid
      </label>
    </div>

    <div class="flex gap-3 justify-end pt-4">
      <button
        (click)="close()"
        class="px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition font-medium"
        type="button">
        Cancel
      </button>
      <button
        [disabled]="form.invalid"
        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed"
        type="submit">
        {{ editingBill() ? 'Update' : 'Add' }} Bill
      </button>
    </div>
  </form>
</app-modal>
