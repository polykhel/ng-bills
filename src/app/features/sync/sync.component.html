<div class="min-h-screen bg-slate-50 p-6">
  <div class="max-w-4xl mx-auto">
    <div class="mb-6">
      <h1 class="text-3xl font-bold text-slate-900">Sync & Backup</h1>
      <p class="text-slate-600 mt-2">Export and import your data securely across devices</p>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6 border border-slate-100">
      <div class="flex items-center gap-2 mb-4">
        <lucide-icon [img]="FileDown" class="w-5 h-5 text-blue-600"></lucide-icon>
        <h2 class="text-xl font-semibold text-slate-900">Manual Sync</h2>
      </div>

      <p class="text-sm text-slate-600 mb-4">
        Export your data as an encrypted file and import it on another device. You can store it in any cloud drive.
      </p>

      <div class="mb-4 flex items-center gap-3">
        <input
          [(ngModel)]="isEncrypted"
          class="w-4 h-4 text-blue-600 rounded border-slate-300"
          id="encrypted"
          type="checkbox"
        />
        <label class="flex items-center gap-2 text-sm font-medium text-slate-700" for="encrypted">
          <lucide-icon [img]="Lock" class="w-4 h-4"></lucide-icon>
          Encrypt data (recommended)
        </label>
      </div>

      @if (isEncrypted) {
        <div class="mb-4">
          <label class="block text-sm font-medium text-slate-700 mb-1" for="password">Password</label>
          <input
            [(ngModel)]="password"
            class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            id="password"
            placeholder="Enter encryption password"
            type="password"
          />
          @if (password) {
            <div class="mt-2">
              <div class="flex items-center gap-2 text-xs">
                <span class="text-slate-600">Strength:</span>
                <div class="flex-1 h-1.5 bg-slate-200 rounded-full overflow-hidden">
                  <div
                    [class.bg-green-500]="passwordStrength === 'strong'"
                    [class.bg-red-500]="passwordStrength === 'weak'"
                    [class.bg-yellow-500]="passwordStrength === 'medium'"
                    [style.width]="strengthWidth"
                    class="h-full transition-all"
                  ></div>
                </div>
                <span
                  [class.text-green-600]="passwordStrength === 'strong'"
                  [class.text-red-600]="passwordStrength === 'weak'"
                  [class.text-yellow-600]="passwordStrength === 'medium'"
                  class="font-medium"
                >
                      {{ passwordStrength }}
                    </span>
              </div>
            </div>
          }
          <p class="text-xs text-slate-500 mt-1">Remember this password â€” you'll need it to import your data.</p>
        </div>
      }

      <div class="flex flex-wrap gap-3">
        <button
          (click)="handleExport()"
          [disabled]="isProcessing"
          class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors"
          type="button"
        >
          <lucide-icon [img]="Download" class="w-4 h-4"></lucide-icon>
          Export Data
        </button>

        <label
          class="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer transition-colors">
          <lucide-icon [img]="Upload" class="w-4 h-4"></lucide-icon>
          Import Data
          <input (change)="handleImport($event)" [disabled]="isProcessing" accept=".json" class="hidden" type="file"/>
        </label>
      </div>

      @if (message) {
        <div
          [class.bg-green-50]="!isError"
          [class.bg-red-50]="isError"
          [class.text-green-800]="!isError"
          [class.text-red-800]="isError"
          class="mt-4 p-3 rounded-md text-sm"
        >
          {{ message }}
        </div>
      }
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 border border-slate-100">
      <div class="flex items-center gap-2 mb-4">
        <lucide-icon [img]="Cloud" class="w-5 h-5 text-blue-600"></lucide-icon>
        <h2 class="text-xl font-semibold text-slate-900">Auto-Sync</h2>
      </div>
      <p class="text-sm text-slate-600 mb-3">
        Google Drive sync is not configured in this build. Manual export/import keeps your data portable.
      </p>
      <p class="text-xs text-slate-500">
        To enable auto-sync later, wire Google Drive client ID/API key in environment settings and hook into
        GoogleDriveSyncService.
      </p>
    </div>

    <div class="mt-6 bg-slate-50 rounded-lg p-4 border border-slate-200">
      <div class="flex items-start gap-2">
        <lucide-icon [img]="AlertCircle" class="w-4 h-4 text-slate-600 mt-0.5"></lucide-icon>
        <div class="flex-1">
          <h3 class="font-medium text-slate-900 mb-1">Your Data</h3>
          <p class="text-sm text-slate-600">Current data size: <span class="font-medium">{{ formattedDataSize }}</span>
          </p>
          <p class="text-xs text-slate-500 mt-1">Approximate size of your backup file</p>
        </div>
      </div>
    </div>

    <div class="mt-4 bg-blue-50 rounded-lg p-4 border border-blue-200">
      <h3 class="font-semibold text-blue-900 mb-2">How to sync between devices:</h3>
      <ol class="text-sm text-blue-800 space-y-1 list-decimal list-inside">
        <li>Export your data with a strong password.</li>
        <li>Store the backup file in your cloud storage (Dropbox, iCloud, Google Drive, etc.).</li>
        <li>Download the file on your other device.</li>
        <li>Import the file using the same password.</li>
      </ol>
    </div>
  </div>
</div>
